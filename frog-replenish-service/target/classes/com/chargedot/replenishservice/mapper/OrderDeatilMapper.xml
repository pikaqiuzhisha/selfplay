<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.chargedot.replenishservice.mapper.OrderDeatilMapper">

    <!--根据certNnmber查询在线卡信息-->
<select id="QueryChargeRecordByOrderNumber" resultType="com.chargedot.replenishservice.model.OrderDeatil">
SELECT
	dco.pay_status AS payStatus,
	dco.order_number AS orderNumber,
	dd.device_number AS deviceNumber,
	dco.start_type AS startType,
	dco.started_at AS startedAt,
	dco.finished_at AS finishedAt,
	dco.charge_finish_reason AS chargeFinishReason,
	dco.refund_act AS refundAct,
	dco.duration_plan AS durationPlan,
	dco.duration AS duration,
	dco.sampling_power AS samplingPower,
	dco.payment AS payment
FROM
	dw_charge_order AS dco LEFT JOIN dw_device AS dd ON dco.device_id=dd.id
WHERE
	dco.order_number =#{orderNumber}
ORDER BY
	dco.started_at DESC
</select>

</mapper>